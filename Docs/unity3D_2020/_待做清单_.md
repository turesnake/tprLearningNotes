# ================================================================ #
#                  unity3d  待做清单
# ================================================================ #



# --- 008 --- #
部分 shader 在 imac 中无法正常允许，需要到 pc 中调试
比如 geometric shader


# --- 009 --- #
光照衰减 纹理查找表： Lookup Table LUT 
去 manual 中学习这方面的知识


# --- 010 --- #
学习 ScriptableWizard 的使用


# --- 012 --- #
在 win 平台 安装 RenderDoc


# --- 013 --- #
brdf 学习：
Cook-Torrance 库克-托伦斯
    貌似是表现最好的

Torrance-Sparrow 微面元模型

Ward Isotropic 
    据说 Ward 在表现 各向异性 材质时最好

microfacet distribution fit
    比 ward 更好的，表现 各向异性 的材质

Lafortune Lobe

GGX -- 法线分布函数 （Trowbridge-Reitz 法线分布函数）

Beckmann -- 法线分布函数



# --- 016 --- #
为什么 菲涅尔 公式中，要使用 sin值 
为什么是 sin ？？？
《Real-Time Rendering》p-319



# --- 018 --- #
学习 ScriptableObject



# --- 019 --- #
阅读 manual: Occlusion culling

阅读 manual: Shadow
    RTR chapter 7: shadows

# --- 019 --- #
shadowCaster pass 几大疑问：
- shadow map 是哪里被新建的，哪里被写入的，哪里被传输进 gpu 的

- sample shadow map，采样出来的是一个 float 值
    它到底代表什么意思 ？



# --- 019 --- #
各种实际应用中的矩阵，是怎么推导出来的


# --- 020 --- #
《RTR》p-226:
    平面表达式：π:n·x+d=0
    这是啥意思
# :
根据后续文字，π 是这个平面的变量名，冒号后的 表达式 暂时未知



# --- 028 --- #
尝试搞懂 ConvertToAtlasMatrix 到底对矩阵做了啥



# --- 030 --- #
urp 中的函数 GetShadowTransform()
是和 catlike 中的 ConvertToAtlasMatrix() 相似功能的
需要查看



# --- 031 --- #
为什么函数 ComputeDirectionalShadowMatricesAndCullingPrimitives
要返回 两个矩阵？pjt 和 view
为什么两个矩阵叫这么名字

原本，我们需要获得一个矩阵，可以将 pos 从 ws，转换到 STS 空间




# --- 032 --- #

o.depth = -mul(UNITY_MATRIX_MV, v.vertex).z * _ProjectionParams.w;
乘法的前者，获得顶点在 view-space 中的 pos（且 z轴翻转了，是正的）
然后取 posVS.z, 乘以 _ProjectionParams.w
也就是 1/far

获得一个区间值 [0,1] 其中 
0: camera pos
1: far

这恰恰是 Linear01Depth() 实现的

然后我们可以到 frag 中，获得每个像素的 映射值



# --- 033 --- #
查看：
OnRenderImage
OnPostRender

OnWillRenderObject
    to find out if an object is seen by a camera or not

camera.depthTextureMode = DepthTextureMode.Depth
    it's just there when running deferred
    Then the depth buffer will be available as _CameraDepthTexture
    

    glancing(dot(view, normal))


# --- 034 --- #
在 urp manual: Feature comparison table 中：
    builtin shading - Multiple Passes
    urp shading - Single Pass


# --- 036 --- #
为什么 camera depth buffer 的写入工作
    urp 依赖 depthOnly pass
    builtin 依赖 shadow caster pass ？？？


# --- 037 --- #
urp 中，如何从 cpu端，向 gpu 传输数据
疑似的 信息：

ScriptableRendererFeature
ScriptableRendererData
ScriptableRenderPass

学习如何正确使用 
    ScriptableRendererFeature

URP set global Property

# === 最简单的方法 ===
    Shader.SetGlobalFloat()
    可以设置 全局态的 properties

# === 第二种：ScriptableRendererFeature ===
    学习如何使用它



# --- 038 --- #
camera 相关的数据：
    _CameraColorTexture
    _CameraDepthTexture
    _CameraDepthNormalsTexture -- not support in urp


# --- 039 --- #
Renderer Feature 学到的知识点：
# Render Texture
    在运行时动态创建和填充的 texture
    可以作为 render 的 target 来使用
    可以指挥一个 camera，将渲染的内容，写入这个 rt
    然后在后续流程中，像使用常规 texture 一样去使用这个 rt
    ---
    可以在 Asserts 面板手动创建一个实例：
        Create - Render Texture 
    

# RenderTargetIdentifier
    Identifies a RenderTexture for a CommandBuffer.

    rt 可以有数种方法来  identified
    如 rt obj，BuiltinRenderTextureType，
    或 a temporary render texture with a name

    本class 用来 identify 这些 rt，且提供一些通用化操作，比如 比较是否相同 等等


# RenderTargetHandle
    URP对RenderTargetIdentifier的一个封装
    自动生成-保存 propertyID， 避免多次 hash 计算
    真正用rt的时候，才会创建RenderTargetIdentifier

    static readonly RenderTargetHandle CameraTarget;
        当前 camera 默认 render tgt


    void Init(string shaderProperty);
        输入 rt name，本class 自动生成其 propertyID，并缓存起来

    RenderTargetIdentifier Identifier();
        为 ConfigureTarget 提供目标参数时, 可以作为参数使用.


# ScriptableRendererFeature
    在 Asserts 面板，可以直接创建一个实例模版：
        Create - Rendering - U..R..P.. - Renderer Feature
    我们只需在这个 模版基础上，拓展自己的 内容即可


# RenderTextureDescriptor [struct]
    This struct contains all the information required to create a RenderTexture. 
    It can be copied, cached, and reused to easily create RenderTextures 
    that all share the same properties.


# ScriptableRenderer 
    implements a rendering strategy. 
    It describes how culling and lighting works and the effects supported.



# RenderingData



# --- 044 --- #
有空阅读 hdrp 的基础知识



# --- 046 --- #




# --- 047 --- #



# --- 048 --- #


# --- 049 --- #


# --- 050 --- #


# --- 051 --- #


# --- 052 --- #
